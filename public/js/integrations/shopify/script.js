!function(t){var e={};function o(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=653)}({653:function(t,e,o){t.exports=o(654)},654:function(t,e,o){"use strict";function i(){var t,e,o,i=document.querySelector("#lootly-widget");if(i){var s=(i.getAttribute("data-provider")||"https://lootly.io").replace(new RegExp("/$"),"")+"/widget";i.getAttribute("data-api-key");s+="?"+[{key:"_cid",value:i.getAttribute("data-customer-id")||""},{key:"_cs",value:i.getAttribute("data-customer-signature")||""},{key:"_shd",value:i.getAttribute("data-shop-domain")||""},{key:"_shs",value:i.getAttribute("data-shop-id")||""}].filter(function(t){return""!==t.value.trim()}).map(function(t){return encodeURIComponent(t.key)+"="+encodeURIComponent(t.value)}).join("&");var d=document.createElement("iframe");d.setAttribute("src",s),d.setAttribute("id","lootly_iframe"),i.classList.add("widget-closed"),i.appendChild(d),t=window,e="message",o=function(t){var e=t.data,o={};try{var s=JSON.parse(t.data);e=s.action,o=s.data}catch(t){}switch(e){case"widget-init":break;case"widget-ready":var d="left"==o.position?"widget-left":"widget-right";i.classList.add(d),i.setAttribute("display-on",o.display_on);var c=document.createElement("style");c.innerHTML=o.styles||"",i.appendChild(c),i.classList.add("widget-ready"),function(){var t,e,o,i,a,s=document.querySelector("#lootly-widget #lootly_iframe");if(s){var d=document.querySelector("#lootly-widget");t=d.getAttribute("data-customer-id")||"",e=d.getAttribute("data-customer-signature")||"",o=d.getAttribute("data-shop-domain")||"",i=d.getAttribute("data-shop-id")||"",(a=document.getElementById("lootly-inline-points"))&&r(t,e,o,i,a,""===t?"/api/widget/actions":"/api/widget/customer/actions");var c=function(t){s.contentWindow.postMessage(t,"*")},l=!1,u=n("lootlyref");if(u?(l=!0,c(JSON.stringify({action:"receive-reward",data:{referral_slug:u}}))):(u=n("loref"))&&(l=!0,c(JSON.stringify({action:"receive-reward",data:{referral_slug:u}}))),!l){var g=n("lourl");if(g)switch(g){case"earn-points":c(JSON.stringify({action:"earn-points"}));break;case"get-coupon":c(JSON.stringify({action:"get-coupon"}))}}window.openLootlyWidget=function(t){t.preventDefault(),c(JSON.stringify({action:"toggle-widget"}))}}}(),window.addEventListener("resize",a),a();break;case"account-login":window.location.href="undefined"!=typeof Lootly&&Lootly.config&&Lootly.config.loginUrl?Lootly.config.loginUrl:"/account/login";break;case"account-register":window.location.href="undefined"!=typeof Lootly&&Lootly.config&&Lootly.config.registerUrl?Lootly.config.registerUrl:"/account/register";break;case"close-widget":document.body.classList.remove("lootly-widget-open"),i.classList.add("widget-closed");break;case"open-widget":document.body.classList.add("lootly-widget-open"),i.classList.remove("widget-closed");break;case"add-current-page":i.setAttribute("data-current-page",o);break;case"toggle-rewards-tab":i.classList.toggle("widget-has-rewards");break;case"reward-redeemed-tab":i.classList.add("widget-reward-redeemed")}},t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,o)}}function r(t,e,o,i,r,a){var n=(document.querySelector("#lootly-widget").getAttribute("data-provider")||"https://lootly.io").replace(new RegExp("/$"),""),s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&200==this.status&&function(t,e){var o=JSON.parse(t);if(o.data){var i=o.data;if(i.length){var r=i.filter(function(t){return"make-a-purchase"===t.action.url})[0],a=r.point_value,n=e.getAttribute("data-product-price")/100,s=Math.floor(a*n),d="Members will earn "+s+" points with this purchase";e.innerHTML=d}}}(this.responseText,r)},s.open("POST",n+a,!0),s.setRequestHeader("Content-type","application/json;charset=UTF-8"),s.send(JSON.stringify({shop:{domain:o,signature:i},customer:{id:t,signature:e}}))}function a(){document.querySelector("#lootly-widget iframe").contentWindow.postMessage(JSON.stringify({action:"viewport-width",data:{width:window.innerWidth}}),"*")}function n(t){for(var e=window.location.search.substring(1).split("&"),o=0;o<e.length;o++){var i=e[o].split("=");if(i[0]==t)return i[1]}return!1}Object.defineProperty(e,"__esModule",{value:!0}),console.log("Lootly App Initialized!"),i(),window.lootlyWidgetInit=i}});